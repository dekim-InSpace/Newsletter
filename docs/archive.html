<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>한컴인스페이스 뉴스레터 아카이브</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      background: radial-gradient(circle at top, #0b1120 0, #020617 45%, #020617 100%);
      color: #e5e7eb;
    }

    .archive-wrap {
      max-width: 700px;
      margin: 0 auto;
      padding: 32px 16px 48px 16px;
    }

    .archive-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .archive-subtitle {
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 24px;
    }

    /* chips 줄 */
    .chips-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }

    .chip {
      border-radius: 999px;
      border: 1px solid rgba(248, 250, 252, 0.4); /* 살짝 흰색 테두리 */
      background: rgba(15, 23, 42, 0.55);         /* 반투명 남색 느낌 */
      color: #e5e7eb;
      padding: 4px 14px;
      font-size: 13px;
      line-height: 1.4;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition:
        background-color 0.15s ease,
        color 0.15s ease,
        border-color 0.15s ease,
        box-shadow 0.15s ease;
      white-space: nowrap;
    }

    .chip:hover {
      background: rgba(59, 130, 246, 0.22);       /* hover 시 파란기 살짝 */
      border-color: rgba(96, 165, 250, 0.85);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.35);
    }

    .chip--active {
      background: #2563eb;                       /* 클릭 시 파란색 */
      border-color: #2563eb;
      color: #ffffff;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.7);
    }

    /* 아카이브 테이블 */
    .archive-table-wrap {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.25);
      box-shadow:
        0 18px 40px rgba(15, 23, 42, 0.75),
        0 0 0 1px rgba(15, 23, 42, 0.9) inset;
      overflow: hidden;
    }

    table.archive-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    .archive-table thead tr {
      background: rgba(15, 23, 42, 0.95);
    }

    .archive-table th,
    .archive-table td {
      padding: 10px 14px;
    }

    .archive-table th {
      text-align: left;
      font-size: 12px;
      color: #9ca3af;
      border-bottom: 1px solid rgba(148, 163, 184, 0.4);
    }

    .archive-table tbody tr:nth-child(even) {
      background: rgba(15, 23, 42, 0.85);
    }

    .archive-table tbody tr:nth-child(odd) {
      background: rgba(15, 23, 42, 0.7);
    }

    .archive-table tbody tr:hover {
      background: rgba(30, 64, 175, 0.5);
    }

    .archive-date {
      width: 110px;
      white-space: nowrap;
      color: #cbd5f5;
      font-size: 13px;
    }

    .archive-label .archive-link {
      color: #e5e7eb;
      text-decoration: none;
    }

    .archive-label .archive-link:hover {
      text-decoration: underline;
      color: #bfdbfe;
    }

    .archive-empty {
      padding: 32px 14px;
      font-size: 14px;
      color: #9ca3af;
      text-align: center;
    }

    @media (max-width: 640px) {
      .archive-wrap {
        padding: 24px 12px 36px 12px;
      }
      .archive-title {
        font-size: 20px;
      }
      .archive-date {
        width: 96px;
      }
      .archive-table th,
      .archive-table td {
        padding: 8px 10px;
      }
    }
  </style>
</head>

<body>
  <div class="archive-wrap">
    <div class="archive-title">한컴인스페이스 뉴스레터 아카이브</div>
    <div class="archive-subtitle">
      주차별 뉴스레터를 연도 / 월 단위로 빠르게 찾아볼 수 있습니다.
    </div>

    <!-- ✅ 여기: 전체 / 연도 / 월 칩이 들어가는 곳 -->
    <div id="archive-chips" class="chips-row"></div>

    <div class="archive-table-wrap">
      <table class="archive-table">
        <thead>
          <tr>
            <th>날짜</th>
            <th>뉴스레터</th>
          </tr>
        </thead>
        <tbody>
          
          <tr class="archive-row"
              data-year="2025"
              data-month="12">
            <td class="archive-date">2025.12.09</td>
            <td class="archive-label">
              <a href="https://hancom-inspace.github.io/Weekly-Newsletter/2025/12/09/index.html" target="_blank" class="archive-link">
                12월 2주차 뉴스레터
              </a>
            </td>
          </tr>
        
          <tr class="archive-row"
              data-year="2025"
              data-month="12">
            <td class="archive-date">2025.12.08</td>
            <td class="archive-label">
              <a href="https://hancom-inspace.github.io/Weekly-Newsletter/2025/12/08/index.html" target="_blank" class="archive-link">
                12월 2주차 뉴스레터
              </a>
            </td>
          </tr>
        
          <tr class="archive-row"
              data-year="2025"
              data-month="12">
            <td class="archive-date">2025.12.05</td>
            <td class="archive-label">
              <a href="https://hancom-inspace.github.io/Weekly-Newsletter/2025/12/05/index.html" target="_blank" class="archive-link">
                12월 1주차 뉴스레터
              </a>
            </td>
          </tr>
        
        </tbody>
      </table>
    </div>
  </div>

  <script>
  (function() {
    var rows = Array.prototype.slice.call(
      document.querySelectorAll('.archive-row')
    );
    if (!rows.length) {
      return;
    }

    var chipsWrap = document.getElementById('archive-chips');
    if (!chipsWrap) {
      return;
    }

    // 사용 가능한 연도 목록 만들기
    var yearSet = {};
    rows.forEach(function(row) {
      var y = row.getAttribute('data-year');
      if (y) {
        yearSet[y] = true;
      }
    });

    var years = Object.keys(yearSet).sort(function(a, b) {
      return parseInt(b, 10) - parseInt(a, 10); // 최신 연도 먼저
    });

    var currentYear = null;
    var currentMonth = null;

    function createChip(label, options) {
      options = options || {};
      var btn = document.createElement('button');
      btn.type = 'button';
      btn.textContent = label;
      btn.className = 'chip';
      if (options.type) {
        btn.setAttribute('data-type', options.type);
      }
      if (options.value != null) {
        btn.setAttribute('data-value', String(options.value));
      }
      return btn;
    }

    function clearActiveChips() {
      var chips = chipsWrap.querySelectorAll('.chip');
      Array.prototype.forEach.call(chips, function(c) {
        c.classList.remove('chip--active');
      });
    }

    function showOnlyYearLevelControls() {
      var yearChips = chipsWrap.querySelectorAll('.chip[data-type="year"]');
      var monthChips = chipsWrap.querySelectorAll('.chip[data-type="month"]');

      Array.prototype.forEach.call(yearChips, function(c) {
        c.style.display = 'inline-flex';
      });
      Array.prototype.forEach.call(monthChips, function(c) {
        c.style.display = 'none';
      });
    }

    function showAllControls() {
      var yearChips = chipsWrap.querySelectorAll('.chip[data-type="year"]');
      var monthChips = chipsWrap.querySelectorAll('.chip[data-type="month"]');

      Array.prototype.forEach.call(yearChips, function(c) {
        c.style.display = 'inline-flex';
      });
      Array.prototype.forEach.call(monthChips, function(c) {
        c.style.display = 'inline-flex';
      });
    }

    function applyFilter() {
      rows.forEach(function(row) {
        var y = row.getAttribute('data-year');
        var m = row.getAttribute('data-month');

        var show = true;

        if (currentYear !== null && String(currentYear) !== String(y)) {
          show = false;
        }

        if (currentMonth !== null && String(currentMonth) !== String(m)) {
          show = false;
        }

        row.style.display = show ? '' : 'none';
      });
    }

    function handleAllClick() {
      currentYear = null;
      currentMonth = null;
      clearActiveChips();

      var allChip = chipsWrap.querySelector('.chip[data-type="all"]');
      if (allChip) {
        allChip.classList.add('chip--active');
      }

      showOnlyYearLevelControls();
      applyFilter();
    }

    function handleYearClick(year) {
      currentYear = year;
      currentMonth = null;
      clearActiveChips();

      var yearChip = chipsWrap.querySelector(
        '.chip[data-type="year"][data-value="' + year + '"]'
      );
      if (yearChip) {
        yearChip.classList.add('chip--active');
      }

      showAllControls();
      applyFilter();
    }

    function handleMonthClick(month) {
      // 연도가 선택 안 된 상태에서 월을 누르면 가장 최신 연도로 자동
      if (currentYear === null && years.length > 0) {
        currentYear = years[0];
      }

      currentMonth = month;
      clearActiveChips();

      var yearChip = chipsWrap.querySelector(
        '.chip[data-type="year"][data-value="' + currentYear + '"]'
      );
      if (yearChip) {
        yearChip.classList.add('chip--active');
      }

      var monthChip = chipsWrap.querySelector(
        '.chip[data-type="month"][data-value="' + month + '"]'
      );
      if (monthChip) {
        monthChip.classList.add('chip--active');
      }

      showAllControls();
      applyFilter();
    }

    // ---------- 칩 실제 생성 부분 ----------

    // 1) 전체
    var allChip = createChip('전체', { type: 'all' });
    allChip.addEventListener('click', function() {
      handleAllClick();
    });
    chipsWrap.appendChild(allChip);

    // 2) 연도 칩
    years.forEach(function(y) {
      var chip = createChip(y + '년', { type: 'year', value: y });
      chip.addEventListener('click', function() {
        handleYearClick(y);
      });
      chipsWrap.appendChild(chip);
    });

    // 3) 월 칩 (1~12월)
    for (var m = 1; m <= 12; m++) {
      var label = m + '월';
      var chip = createChip(label, { type: 'month', value: String(m) });
      (function(mm) {
        chip.addEventListener('click', function() {
          handleMonthClick(mm);
        });
      })(String(m));
      chipsWrap.appendChild(chip);
    }

    // 처음 들어왔을 때 상태:
    //  - "전체" 칩이 활성화
    //  - 연도 칩만 보이고, 월 칩은 숨겨진 상태
    handleAllClick();
  })();
  </script>
</body>
</html>
